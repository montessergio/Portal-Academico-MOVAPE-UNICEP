<!DOCTYPE html>
<html lang="es">
<head>	
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>FundaciÃ³n MOVAPE/UNICEP - Acceso al Portal</title>
Â  Â  <style>
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
Â  Â  Â  Â  Â  Â  overflow-x: hidden;
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #87CEEB 0%, #6B8E23 100%);
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  }

Â  Â  Â  Â  .animated-bg {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  z-index: -1;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  }

Â  Â  Â  Â  .sphere {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0.3));
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  Â  Â  Â  Â  animation: float 6s ease-in-out infinite;
Â  Â  Â  Â  }

Â  Â  Â  Â  .sphere:nth-child(1) { width: 80px; height: 80px; top: 20%; left: 10%; animation-delay: 0s; }
Â  Â  Â  Â  .sphere:nth-child(2) { width: 120px; height: 120px; top: 60%; right: 15%; animation-delay: 2s; }
Â  Â  Â  Â  .sphere:nth-child(3) { width: 60px; height: 60px; top: 80%; left: 20%; animation-delay: 4s; }
Â  Â  Â  Â  .sphere:nth-child(4) { width: 100px; height: 100px; top: 30%; right: 30%; animation-delay: 1s; }
Â  Â  Â  Â  .sphere:nth-child(5) { width: 90px; height: 90px; top: 10%; left: 60%; animation-delay: 3s; }

Â  Â  Â  Â  @keyframes float {
Â  Â  Â  Â  Â  Â  0%, 100% { transform: translateY(0px) rotate(0deg); }
Â  Â  Â  Â  Â  Â  50% { transform: translateY(-20px) rotate(180deg); }
Â  Â  Â  Â  }

Â  Â  Â  Â  .container { position: relative; z-index: 1; min-height: 100vh; display: flex; flex-direction: column; }
Â  Â  Â  Â  .login-section { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 2rem; text-align: center; }
Â  Â  Â  Â  .dashboard-section { display: none; flex-direction: column; flex: 1; padding: 2rem; max-width: 1200px; margin: 0 auto; width: 100%; }
Â  Â  Â  Â  .logo { background: rgba(255,255,255,0.9); padding: 2rem; border-radius: 20px; margin-bottom: 2rem; box-shadow: 0 10px 30px rgba(0,0,0,0.2); backdrop-filter: blur(10px); }
Â  Â  Â  Â  .logo h1 { margin: 0; color: #2c5530; font-size: 2.5rem; font-weight: bold; }
Â  Â  Â  Â  .logo p { margin: 0.5rem 0 0 0; color: #4682B4; font-size: 1.2rem; }
Â  Â  Â  Â  .login-form { background: rgba(255,255,255,0.9); padding: 3rem; border-radius: 20px; box-shadow: 0 15px 40px rgba(0,0,0,0.2); backdrop-filter: blur(10px); max-width: 400px; width: 100%; margin-top: 2rem; }
Â  Â  Â  Â  .login-form h2 { margin: 0 0 2rem 0; color: #2c5530; font-size: 1.8rem; }
Â  Â  Â  Â  .form-group { margin-bottom: 1.5rem; text-align: left; }
Â  Â  Â  Â  .form-group label { display: block; margin-bottom: 0.5rem; color: #2c5530; font-weight: bold; }
Â  Â  Â  Â  .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1rem; transition: all 0.3s ease; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
Â  Â  Â  Â  .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: #4682B4; box-shadow: 0 0 10px rgba(70, 130, 180, 0.3); }
Â  Â  Â  Â  .login-btn, .action-btn { width: 100%; background: linear-gradient(45deg, #87CEEB, #6B8E23); color: white; border: none; padding: 1rem; border-radius: 10px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: all 0.3s ease; margin-top: 1rem; }
Â  Â  Â  Â  .login-btn:hover, .action-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
Â  Â  Â  Â  .action-btn { width: auto; padding: 0.8rem 1.5rem; font-size: 1rem; }
Â  Â  Â  Â  .demo-ids { background: rgba(255,255,255,0.8); padding: 1.5rem; border-radius: 15px; margin-top: 2rem; max-width: 400px; width: 100%; }
Â  Â  Â  Â  .demo-ids h3 { margin: 0 0 1rem 0; color: #2c5530; font-size: 1.2rem; }
Â  Â  Â  Â  .demo-id { display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0; border-bottom: 1px solid #eee; font-size: 0.9rem; }
Â  Â  Â  Â  .demo-id:last-child { border-bottom: none; }
Â  Â  Â  Â  .demo-id .id-code { font-weight: bold; color: #4682B4; cursor: pointer; }
Â  Â  Â  Â  .demo-id .id-code:hover { text-decoration: underline; }
Â  Â  Â  Â  .error-message { background: rgba(255, 0, 0, 0.1); color: #d32f2f; padding: 1rem; border-radius: 10px; margin-top: 1rem; border: 1px solid rgba(255, 0, 0, 0.3); display: none; }
Â  Â  Â  Â  .dashboard-header { background: rgba(255,255,255,0.9); padding: 1.5rem; border-radius: 15px; margin-bottom: 2rem; display: flex; justify-content: space-between; align-items: center; backdrop-filter: blur(10px); flex-wrap: wrap; }
Â  Â  Â  Â  .dashboard-header h2 { margin: 0; color: #2c5530; }
Â  Â  Â  Â  .back-btn { background: linear-gradient(45deg, #87CEEB, #6B8E23); color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 10px; cursor: pointer; font-weight: bold; transition: all 0.3s ease; }
Â  Â  Â  Â  .back-btn:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
Â  Â  Â  Â  .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
Â  Â  Â  Â  .dashboard-card { background: rgba(255,255,255,0.9); padding: 2rem; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); backdrop-filter: blur(10px); transition: all 0.3s ease; display: flex; flex-direction: column; }
Â  Â  Â  Â  .dashboard-card:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.15); cursor: pointer; }
Â  Â  Â  Â  .dashboard-card.non-clickable:hover { transform: none; box-shadow: 0 5px 20px rgba(0,0,0,0.1); cursor: default; }
Â  Â  Â  Â  .dashboard-card h3 { margin: 0 0 1rem 0; color: #2c5530; display: flex; align-items: center; gap: 0.5rem; }
Â  Â  Â  Â  .card-content { color: #666; line-height: 1.6; flex-grow: 1; }
Â  Â  Â  Â  .grade-item, .schedule-item-summary, .subject-item, .material-item, .assignment-item { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 0; border-bottom: 1px solid #eee; }
Â  Â  Â  Â  .grade-item:last-child, .schedule-item-summary:last-child, .subject-item:last-child, .material-item:last-child, .assignment-item:last-child { border-bottom: none; }
Â  Â  Â  Â  .grade { font-weight: bold; color: #4682B4; }
Â  Â  Â  Â  .schedule-item { background: linear-gradient(45deg, rgba(135,206,235,0.1), rgba(107,142,35,0.1)); padding: 1rem; border-radius: 8px; margin-bottom: 0.5rem; }
Â  Â  Â  Â  .calendar-item { border-left: 4px solid #6B8E23; padding-left: 1rem; margin-bottom: 1rem; }
Â  Â  Â  Â  .calendar-item.holiday { border-color: #d32f2f; }
Â  Â  Â  Â  .calendar-item.event { border-color: #4682B4; }
        .calendar-item.exam { border-color: #ff9800; }
Â  Â  Â  Â  .calendar-item strong { color: #2c5530; }
Â  Â  Â  Â  .schedule-time { font-weight: bold; color: #2c5530; }
Â  Â  Â  Â  .announcement { background: rgba(135,206,235,0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1rem; border-left: 4px solid #4682B4; }
Â  Â  Â  Â  .announcement:last-child { margin-bottom: 0; }
Â  Â  Â  Â  .announcement-date { font-size: 0.9rem; color: #666; margin-bottom: 0.5rem; }
Â  Â  Â  Â  table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
Â  Â  Â  Â  th, td { padding: 0.8rem; text-align: left; border-bottom: 1px solid #ddd; }
Â  Â  Â  Â  th { background-color: rgba(107,142,35,0.1); color: #2c5530; }
Â  Â  Â  Â  tr.clickable-row:hover { background-color: rgba(107,142,35,0.05); cursor: pointer; }
Â  Â  Â  Â  .status-entregado { color: green; font-weight: bold; }
Â  Â  Â  Â  .status-pendiente { color: orange; font-weight: bold; }
Â  Â  Â  Â  .attendance-toggle { cursor: pointer; }
Â  Â  Â  Â  .attendance-Presente { color: green; }
Â  Â  Â  Â  .attendance-Ausente { color: red; }
Â  Â  Â  Â  .attendance-Pendiente { color: grey; }
Â  Â  Â  Â  @media (max-width: 768px) {
Â  Â  Â  Â  Â  Â  .logo h1 { font-size: 2rem; }
Â  Â  Â  Â  Â  Â  .login-form { padding: 2rem; margin: 1rem; }
Â  Â  Â  Â  Â  Â  .dashboard-header { flex-direction: column; gap: 1rem; text-align: center; }
Â  Â  Â  Â  Â  Â  .dashboard-grid { grid-template-columns: 1fr; }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="animated-bg">
Â  Â  Â  Â  <div class="sphere"></div><div class="sphere"></div><div class="sphere"></div><div class="sphere"></div><div class="sphere"></div>
Â  Â  </div>
Â  Â  <div class="container">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="login-section" id="loginSection">
Â  Â  Â  Â  Â  Â  <div class="logo">
Â  Â  Â  Â  Â  Â  Â  Â  <h1>FundaciÃ³n MOVAPE/UNICEP</h1>
Â  Â  Â  Â  Â  Â  Â  Â  <p>Portal Universitario Digital</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="login-form">
Â  Â  Â  Â  Â  Â  Â  Â  <h2>ğŸ“ Acceso al Portal</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <form id="loginForm" onsubmit="handleLogin(event)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="userType">Tipo de Usuario:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="userType" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Selecciona tu tipo</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="student">Estudiante</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="professor">Docente</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="admin">Administrador</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="userId">ID de Usuario:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="userId" placeholder="Ingresa tu ID universitario" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="login-btn">Ingresar al Portal</button>
Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="error-message" id="errorMessage">ID o tipo de usuario no vÃ¡lido. Por favor verifica tu informaciÃ³n.</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="demo-ids">
Â  Â  Â  Â  Â  Â  Â  Â  <h3>ğŸ” IDs de DemostraciÃ³n</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="demo-id"><span>Admin de Sistema:</span><span class="id-code" onclick="fillId('ADM-2024-001')">ADM-2024-001</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="demo-id"><span>MarÃ­a GonzÃ¡lez - Ing. Industrial:</span><span class="id-code" onclick="fillId('EST-2024-001')">EST-2024-001</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="demo-id"><span>Carlos Ruiz - AdministraciÃ³n:</span><span class="id-code" onclick="fillId('EST-2024-002')">EST-2024-002</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="demo-id"><span>Ana SofÃ­a - PsicologÃ­a:</span><span class="id-code" onclick="fillId('EST-2024-003')">EST-2024-003</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="demo-id"><span>Docente Dr. Ana Mendoza:</span><span class="id-code" onclick="fillId('PROF-2024-101')">PROF-2024-101</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="demo-id"><span>Docente Ing. Roberto Silva:</span><span class="id-code" onclick="fillId('PROF-2024-102')">PROF-2024-102</span></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="dashboard-section" id="mainDashboard">
Â  Â  Â  Â  Â  Â  <div class="dashboard-header">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 id="dashboardTitle">Dashboard</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="back-btn" onclick="logout()">ğŸšª Cerrar SesiÃ³n</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="dashboard-grid" id="dashboardContent"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="dashboard-section" id="detailedSection">
Â  Â  Â  Â  Â  Â  <div class="dashboard-header">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 id="sectionTitle">SecciÃ³n Detallada</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="back-btn" onclick="backToDashboard()">ğŸ”™ Volver al Dashboard</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="sectionContent"></div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // --- DATA ---
Â  Â  Â  Â  let users = {
Â  Â  Â  Â  Â  Â  'EST-2024-001': { type: 'student', name: 'MarÃ­a GonzÃ¡lez', career: 'IngenierÃ­a Industrial', semester: '3Â° Cuatrimestre', modality: 'Sabatina', grades: [{ subject: 'MatemÃ¡ticas Aplicadas', grade: '8.5' }, { subject: 'Procesos Industriales', grade: '9.2' }, { subject: 'FÃ­sica General', grade: '7.8' }], schedule: [{ time: '08:00 - 10:00', subject: 'MatemÃ¡ticas Aplicadas', room: 'Aula 201', professor: 'Prof. Dr. Ana Mendoza', day: 'SÃ¡bado' }, { time: '10:30 - 12:30', subject: 'Procesos Industriales', room: 'Lab. Industrial', professor: 'Prof. Ing. Ana RodrÃ­guez', day: 'SÃ¡bado' }, { time: '14:00 - 16:00', subject: 'FÃ­sica General', room: 'Aula 105', professor: 'Prof. Ing. Roberto Silva', day: 'SÃ¡bado' }] },
Â  Â  Â  Â  Â  Â  'EST-2024-002': { type: 'student', name: 'Carlos Ruiz', career: 'AdministraciÃ³n de Empresas', semester: '5Â° Cuatrimestre', modality: 'Dominical', grades: [{ subject: 'Marketing Digital', grade: '9.1' }, { subject: 'Contabilidad Avanzada', grade: '8.7' }], schedule: [{ time: '09:00 - 11:00', subject: 'Marketing Digital', room: 'Aula 301', professor: 'Prof. Lic. Patricia LÃ³pez', day: 'Domingo' }] },
Â  Â  Â  Â  Â  Â  'EST-2024-003': { type: 'student', name: 'Ana SofÃ­a Herrera', career: 'PsicologÃ­a', semester: '4Â° Cuatrimestre', modality: 'Sabatina', grades: [{ subject: 'PsicologÃ­a Cognitiva', grade: '9.3' }, { subject: 'NeuropsicologÃ­a', grade: '8.8' }], schedule: [{ time: '08:00 - 10:00', subject: 'PsicologÃ­a Cognitiva', room: 'Aula 301', professor: 'Prof. Dra. Carmen VÃ¡squez', day: 'SÃ¡bado' }] },
Â  Â  Â  Â  Â  Â  'PROF-2024-101': { type: 'professor', name: 'Dr. Ana Mendoza', department: 'Facultad de IngenierÃ­a', subjects: ['MatemÃ¡ticas Aplicadas', 'CÃ¡lculo Diferencial'], classes: [{ subject: 'MatemÃ¡ticas Aplicadas', room: 'Aula 201', students: ['EST-2024-001', 'EST-2024-003'] }, { subject: 'CÃ¡lculo Diferencial', room: 'Aula 203', students: ['EST-2024-002'] }] },
Â  Â  Â  Â  Â  Â  'PROF-2024-102': { type: 'professor', name: 'Ing. Roberto Silva', department: 'Facultad de Ciencias', subjects: ['FÃ­sica General', 'FÃ­sica Aplicada'], classes: [{ subject: 'FÃ­sica General', room: 'Aula 105', students: ['EST-2024-001'] }, { subject: 'FÃ­sica Aplicada', room: 'Lab. FÃ­sica', students: ['EST-2024-001'] }] },
Â  Â  Â  Â  Â  Â  'ADM-2024-001': { type: 'admin', name: 'Admin de Sistema', department: 'AdministraciÃ³n Central' }
Â  Â  Â  Â  };
Â  Â  Â  Â  
Â  Â  Â  Â  // --- MODIFICADO: Se usa 'let' para permitir que el admin aÃ±ada eventos ---
Â  Â  Â  Â  let schoolCalendar = [
Â  Â  Â  Â  Â  Â  { date: '2025-09-01', description: 'Inicio de Cuatrimestre Sep-Dic 2025', type: 'event' },
Â  Â  Â  Â  Â  Â  { date: '2025-09-16', description: 'DÃ­a de la Independencia', type: 'holiday' },
Â  Â  Â  Â  Â  Â  { date: '2025-10-27', description: 'Inicio de Primer Parcial', type: 'exam' },
Â  Â  Â  Â  Â  Â  { date: '2025-11-02', description: 'DÃ­a de Muertos', type: 'holiday' },
Â  Â  Â  Â  Â  Â  { date: '2025-11-20', description: 'Aniversario de la RevoluciÃ³n', type: 'holiday' },
Â  Â  Â  Â  Â  Â  { date: '2025-12-08', description: 'Inicio de Segundo Parcial', type: 'exam' },
Â  Â  Â  Â  Â  Â  { date: '2025-12-19', description: 'Fin de Cuatrimestre Sep-Dic 2025', type: 'event' },
Â  Â  Â  Â  ];
Â  Â  Â  Â Â 
Â  Â  Â  Â  // --- El resto de los datos permanece igual ---
Â  Â  Â  Â  let academicMaterials = { 'MatemÃ¡ticas Aplicadas': [{ title: 'CÃ¡lculo Diferencial e Integral', type: 'PDF', size: '2.5 MB' }], 'FÃ­sica General': [{ title: 'Manual de Laboratorio de FÃ­sica', type: 'PDF', size: '3.1 MB' }] };
Â  Â  Â  Â  let assignments = { 'MatemÃ¡ticas Aplicadas': [{ title: 'Tarea 1: Derivadas', dueDate: '2025-10-15', submissions: { 'EST-2024-001': {status: 'Entregado'}, 'EST-2024-003': {status: 'Pendiente'} } }], 'FÃ­sica General': [{ title: 'Reporte de PrÃ¡ctica 1', dueDate: '2025-10-20', submissions: { 'EST-2024-001': {status: 'Entregado', grade: 9.5} } }] };
Â  Â  Â  Â Â 
Â  Â  Â  Â  let currentUserId = null;
Â  Â  Â  Â  const loginSection = document.getElementById('loginSection');
Â  Â  Â  Â  const mainDashboard = document.getElementById('mainDashboard');
Â  Â  Â  Â  const detailedSection = document.getElementById('detailedSection');
Â  Â  Â  Â  const dashboardTitle = document.getElementById('dashboardTitle');
Â  Â  Â  Â  const dashboardContent = document.getElementById('dashboardContent');
Â  Â  Â  Â  const sectionTitle = document.getElementById('sectionTitle');
Â  Â  Â  Â  const sectionContent = document.getElementById('sectionContent');
Â  Â  Â  Â  const errorMessage = document.getElementById('errorMessage');
Â  Â  Â  Â  const loginForm = document.getElementById('loginForm');

Â  Â  Â  Â  function fillId(id) {
Â  Â  Â  Â  Â  Â  document.getElementById('userId').value = id;
Â  Â  Â  Â  Â  Â  if (id.startsWith('EST-')) document.getElementById('userType').value = 'student';
Â  Â  Â  Â  Â  Â  else if (id.startsWith('PROF-')) document.getElementById('userType').value = 'professor';
Â  Â  Â  Â  Â  Â  else if (id.startsWith('ADM-')) document.getElementById('userType').value = 'admin';
Â  Â  Â  Â  }

Â  Â  Â  Â  function handleLogin(event) {
Â  Â  Â  Â  Â  Â  event.preventDefault();
Â  Â  Â  Â  Â  Â  const userIdInput = document.getElementById('userId').value;
Â  Â  Â  Â  Â  Â  const userTypeInput = document.getElementById('userType').value;
Â  Â  Â  Â  Â  Â  const user = users[userIdInput];
Â  Â  Â  Â  Â  Â  if (user && user.type === userTypeInput) {
Â  Â  Â  Â  Â  Â  Â  Â  currentUserId = userIdInput;
Â  Â  Â  Â  Â  Â  Â  Â  loginSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  mainDashboard.style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  errorMessage.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  if (user.type === 'student') populateStudentDashboard(user);
Â  Â  Â  Â  Â  Â  Â  Â  else if (user.type === 'professor') populateProfessorDashboard(user);
Â  Â  Â  Â  Â  Â  Â  Â  else if (user.type === 'admin') populateAdminDashboard(user);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  errorMessage.style.display = 'block';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function logout() {
Â  Â  Â  Â  Â  Â  currentUserId = null;
Â  Â  Â  Â  Â  Â  loginSection.style.display = 'flex';
Â  Â  Â  Â  Â  Â  mainDashboard.style.display = 'none';
Â  Â  Â  Â  Â  Â  detailedSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  loginForm.reset();
Â  Â  Â  Â  }

Â  Â  Â  Â  function backToDashboard() {
Â  Â  Â  Â  Â  Â  detailedSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  mainDashboard.style.display = 'flex';
Â  Â  Â  Â  Â  Â  const user = users[currentUserId];
Â  Â  Â  Â  Â  Â  if (user.type === 'student') populateStudentDashboard(user);
Â  Â  Â  Â  Â  Â  else if (user.type === 'professor') populateProfessorDashboard(user);
Â  Â  Â  Â  Â  Â  else if (user.type === 'admin') populateAdminDashboard(user);
Â  Â  Â  Â  }
        
        // --- MODIFICADO: Se aÃ±ade el Dashboard del Administrador ---
        function populateAdminDashboard(user) {
Â  Â  Â  Â  Â  Â  dashboardTitle.textContent = `Panel de AdministraciÃ³n`;
Â  Â  Â  Â  Â  Â  dashboardContent.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="dashboard-card non-clickable">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>âš™ï¸ Info del Sistema</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-content">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>Usuario:</strong> ${user.name}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>Departamento:</strong> ${user.department}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
                <div class="dashboard-card">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>ğŸ“¢ Comunicados Generales</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-content"><p>Gestionar los anuncios para toda la instituciÃ³n.</p></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
                <div class="dashboard-card" onclick="showDetailedView('adminCalendar')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>ğŸ—“ï¸ Gestionar Calendario</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-content"><p>AÃ±adir y modificar eventos, festivos y exÃ¡menes.</p></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
                <div class="dashboard-card">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>ğŸ‘¥ GestiÃ³n de Usuarios</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-content"><p>Administrar altas, bajas y cambios de usuarios.</p></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  function populateStudentDashboard(user) {
Â  Â  Â  Â  Â  Â  dashboardTitle.textContent = `Bienvenido, ${user.name}`;
Â  Â  Â  Â  Â  Â  dashboardContent.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="dashboard-card non-clickable"><h3>ğŸ§‘â€ğŸ“ Info Estudiante</h3><div class="card-content"><p><strong>Carrera:</strong> ${user.career}</p><p><strong>Cuatrimestre:</strong> ${user.semester}</p></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="dashboard-card" onclick="showDetailedView('studentGrades')"><h3>ğŸ“Š Mis Calificaciones</h3><div class="card-content">${user.grades.map(g => `<div class="grade-item"><span>${g.subject}</span><span class="grade">${g.grade}</span></div>`).join('')}<p style="margin-top:1rem;">Ver todas...</p></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="dashboard-card" onclick="showDetailedView('studentSchedule')"><h3>ğŸ—“ï¸ Mi Horario</h3><div class="card-content">${user.schedule.slice(0, 2).map(s => `<div class="schedule-item-summary"><span>${s.subject}</span><span class="schedule-time">${s.time}</span></div>`).join('')}<p style="margin-top:1rem;">Ver completo...</p></div></div>
                <div class="dashboard-card" onclick="showDetailedView('schoolCalendar')">
                    <h3>ğŸ“… Calendario Escolar</h3>
                    <div class="card-content">
                        ${schoolCalendar.slice(0, 2).map(e => `<div class="calendar-item ${e.type}"><strong>${e.date}:</strong> ${e.description}</div>`).join('')}
                        <p style="margin-top: 1rem;">Ver calendario completo...</p>
                    </div>
                </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  function populateProfessorDashboard(user) {
Â  Â  Â  Â  Â  Â  dashboardTitle.textContent = `Bienvenido, ${user.name}`;
Â  Â  Â  Â  Â  Â  dashboardContent.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="dashboard-card non-clickable"><h3>ğŸ§‘â€ğŸ« Info Docente</h3><div class="card-content"><p><strong>Departamento:</strong> ${user.department}</p></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="dashboard-card" onclick="showDetailedView('professorClasses')"><h3>ğŸ“š Gestionar Clases</h3><div class="card-content">${user.classes.map(c => `<div class="schedule-item-summary"><span>${c.subject}</span><span>${c.students.length} estudiantes</span></div>`).join('')}<p style="margin-top: 1rem;">Seleccionar clase...</p></div></div>
                <div class="dashboard-card" onclick="showDetailedView('schoolCalendar')">
                    <h3>ğŸ“… Calendario Escolar</h3>
                    <div class="card-content">
                         <p>Consulta los eventos institucionales, dÃ­as festivos y periodos de exÃ¡menes.</p>
                    </div>
                </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }
        
        function showDetailedView(view) {
            const user = users[currentUserId];
            mainDashboard.style.display = 'none';
            detailedSection.style.display = 'flex';
            
            // --- MODIFICADO: Se aÃ±aden los nuevos casos para el calendario ---
            switch (view) {
                case 'studentGrades':
                    sectionTitle.textContent = 'ğŸ“Š Mis Calificaciones';
                    sectionContent.innerHTML = `<div class="dashboard-card non-clickable">${user.grades.map(g => `<div class="grade-item"><span>${g.subject}</span><span class="grade">${g.grade}</span></div>`).join('')}</div>`;
                    break;
                case 'studentSchedule':
                    sectionTitle.textContent = 'ğŸ—“ï¸ Mi Horario';
                    sectionContent.innerHTML = `<div class="dashboard-card non-clickable">${user.schedule.map(s => `<div class="schedule-item"><strong>${s.subject}</strong><br>${s.time} (${s.day})<br>${s.room} - ${s.professor}</div>`).join('')}</div>`;
                    break;
                case 'professorClasses':
                    sectionTitle.textContent = 'ğŸ“š Gestionar Clases';
                    sectionContent.innerHTML = `<div class="dashboard-card non-clickable"><h3>Selecciona una clase para ver detalles:</h3>${user.classes.map(c => `<div class="subject-item">${c.subject}</div>`).join('')}</div>`;
                    break;
                case 'adminCalendar': // Nuevo caso para el admin
                    renderAdminCalendar();
                    break;
                case 'schoolCalendar': // Nuevo caso para estudiantes y docentes
                    renderSchoolCalendar();
                    break;
            }
        }
        
        // --- NUEVA FUNCIÃ“N: Renderiza la vista de gestiÃ³n de calendario para el admin ---
        function renderAdminCalendar() {
            sectionTitle.textContent = 'ğŸ—“ï¸ Gestionar Calendario y Eventos';
            schoolCalendar.sort((a, b) => new Date(a.date) - new Date(b.date));

            let eventListHTML = schoolCalendar.map(item => `
                <div class="calendar-item ${item.type}">
                    <strong>${item.date}:</strong> ${item.description}
                </div>
            `).join('');

            sectionContent.innerHTML = `
                <div class="dashboard-grid">
                    <div class="dashboard-card non-clickable">
                        <h3>â• AÃ±adir Nuevo Evento</h3>
                        <div class="card-content">
                            <form id="addEventForm" onsubmit="addCalendarEvent(event)">
                                <div class="form-group">
                                    <label for="eventDate">Fecha:</label>
                                    <input type="date" id="eventDate" required>
                                </div>
                                <div class="form-group">
                                    <label for="eventDescription">DescripciÃ³n:</label>
                                    <textarea id="eventDescription" rows="3" placeholder="Ej: SuspensiÃ³n de labores" required></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="eventType">Tipo de Evento:</label>
                                    <select id="eventType" required>
                                        <option value="event">Evento General</option>
                                        <option value="holiday">DÃ­a Festivo</option>
                                        <option value="exam">Periodo de Examen</option>
                                    </select>
                                </div>
                                <button type="submit" class="action-btn">AÃ±adir Evento</button>
                            </form>
                        </div>
                    </div>
                    <div class="dashboard-card non-clickable">
                        <h3>ğŸ—“ï¸ Calendario Actual</h3>
                        <div class="card-content" id="eventListContainer">
                            ${eventListHTML}
                        </div>
                    </div>
                </div>
            `;
        }

        // --- NUEVA FUNCIÃ“N: AÃ±ade un evento al array schoolCalendar ---
        function addCalendarEvent(event) {
            event.preventDefault();
            const date = document.getElementById('eventDate').value;
            const description = document.getElementById('eventDescription').value;
            const type = document.getElementById('eventType').value;

            if (date && description && type) {
                schoolCalendar.push({ date, description, type });
                document.getElementById('addEventForm').reset(); // Limpia el formulario
                renderAdminCalendar(); // Vuelve a renderizar la vista para mostrar el evento aÃ±adido
            }
        }

        // --- NUEVA FUNCIÃ“N: Renderiza la vista de solo lectura del calendario ---
        function renderSchoolCalendar() {
            sectionTitle.textContent = 'ğŸ“… Calendario Escolar';
            schoolCalendar.sort((a, b) => new Date(a.date) - new Date(b.date));

            sectionContent.innerHTML = `
                <div class="dashboard-card non-clickable">
                    <h3>PrÃ³ximos Eventos</h3>
                    <div class="card-content">
                        ${schoolCalendar.map(item => `
                            <div class="calendar-item ${item.type}">
                                <strong>${item.date}</strong>
                                <p>${item.description}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }
Â  Â  </script>
</body>
</html>
